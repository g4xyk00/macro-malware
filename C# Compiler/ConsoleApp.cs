using System;
using System.Net;
using System.Globalization;

namespace Test
{
    class ConsoleApp
    {
        static void Main(string[] args)
        {
            DateTime localDate = DateTime.Now;
            var culture = new CultureInfo("en-US");
            string datetime = localDate.ToString(culture);

            IPHostEntry host;
            string localIP = "";
            string hostname = Dns.GetHostName();
            host = Dns.GetHostEntry(hostname);

            //To retrieve IP Addresses
            foreach (IPAddress ip in host.AddressList)
            {
                if (ip.AddressFamily.ToString() == "InterNetwork")
                {
                    localIP = ip.ToString();
                }
            }

            String log = "["+datetime+"] Accessed from "+localIP+" ("+hostname+").";
            Console.WriteLine(log);

            //To send the logs to receiver
            var client = new WebClient();
            client.DownloadFile("https://secure.eicar.org/eicar.com", "eicar.com");
        }
    }
}